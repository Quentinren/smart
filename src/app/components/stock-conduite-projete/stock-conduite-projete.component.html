<div class="flexibilite-container">
  <div class="header-section">
    <div class="section-info">
      <h1 class="section-title">Flexibilité Intra-journalière</h1>
    </div>
    
    <div class="action-buttons">
      <button mat-stroked-button color="primary" (click)="refreshData()">
        <mat-icon>refresh</mat-icon>
        Actualiser
      </button>
      <button mat-stroked-button color="primary">
        <mat-icon>info</mat-icon>
        Définitions
      </button>
    </div>
  </div>
  
  <div class="content-container">
    <!-- Tabs for choosing view type -->
    <mat-tab-group class="view-tabs">
      <mat-tab label="TABLEAU">
        <div class="table-container">
          <table class="flexibilite-table">
            <thead>
              <tr>
                <th>Mouvement</th>
                <th>Nord</th>
                <th>Île-de-France</th>
                <th>Lorraine</th>
                <th>Bretagne</th>
                <th>Guyenne</th>
                <th>Provence</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Indicateur Q -> Q+</td>
                <td *ngFor="let region of regions" class="status-cell">
                  <div class="status-indicator" [class.active]="region.indicateurQPositif"></div>
                </td>
              </tr>
              <tr>
                <td>Flexibilité partielle</td>
                <td *ngFor="let region of regions" class="status-cell">
                  <div class="status-indicator" [class.active]="region.flexibilitePartielle"></div>
                </td>
              </tr>
              <tr>
                <td>Indicateur Q -> Q-</td>
                <td *ngFor="let region of regions" class="status-cell">
                  <div class="status-indicator" [class.active]="region.indicateurQNegatif"></div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </mat-tab>
      
      <mat-tab label="CARTE">
        <div class="map-visualization">
          <div class="france-map">
            <!-- SVG Map of France with regions -->
            <svg viewBox="0 0 800 800" xmlns="http://www.w3.org/2000/svg">
              <!-- Background map of France -->
              <path class="france-outline" d="M200,100 C120,150 80,250 100,350 C120,450 150,550 250,600 C350,650 450,650 550,600 C650,550 700,450 720,350 C740,250 700,150 600,100 C500,50 300,50 200,100" fill="#e8f5e9" stroke="#3e7056" stroke-width="3"/>
              
              <!-- North region -->
              <g class="region nord">
                <path d="M300,200 C250,220 220,280 240,320 C260,360 310,370 350,350 C390,330 400,280 380,240 C360,200 330,180 300,200" fill="white" stroke="#3e7056" stroke-width="2"/>
                
                <text x="320" y="280" font-size="16" font-weight="bold">Nord</text>
                
                <g transform="translate(350, 290)">
                  <text y="-35" x="5" font-size="12">Indicateur Q -> Q+</text>
                  <circle cx="0" cy="-30" r="10" [attr.fill]="regions[0].indicateurQPositif ? '#3e7056' : '#f5f5f5'" stroke="#3e7056" stroke-width="1"/>
                  
                  <text y="-15" x="5" font-size="12">Flexibilité partielle</text>
                  <circle cx="0" cy="-10" r="10" [attr.fill]="regions[0].flexibilitePartielle ? '#3e7056' : '#f5f5f5'" stroke="#3e7056" stroke-width="1"/>
                  
                  <text y="5" x="5" font-size="12">Indicateur Q -> Q-</text>
                  <circle cx="0" cy="10" r="10" [attr.fill]="regions[0].indicateurQNegatif ? '#3e7056' : '#f5f5f5'" stroke="#3e7056" stroke-width="1"/>
                </g>
              </g>
              
              <!-- Ile-de-France region -->
              <g class="region ile-de-france">
                <path d="M350,400 C320,420 300,450 310,480 C320,510 350,520 380,510 C410,500 430,470 420,440 C410,410 380,380 350,400" fill="white" stroke="#3e7056" stroke-width="2"/>
                
                <text x="340" y="460" font-size="16" font-weight="bold">Île-De-France</text>
                
                <g transform="translate(430, 460)">
                  <text y="-35" x="5" font-size="12">Indicateur Q -> Q+</text>
                  <circle cx="0" cy="-30" r="10" [attr.fill]="regions[1].indicateurQPositif ? '#3e7056' : '#f5f5f5'" stroke="#3e7056" stroke-width="1"/>
                  
                  <text y="-15" x="5" font-size="12">Flexibilité partielle</text>
                  <circle cx="0" cy="-10" r="10" [attr.fill]="regions[1].flexibilitePartielle ? '#3e7056' : '#f5f5f5'" stroke="#3e7056" stroke-width="1"/>
                  
                  <text y="5" x="5" font-size="12">Indicateur Q -> Q-</text>
                  <circle cx="0" cy="10" r="10" [attr.fill]="regions[1].indicateurQNegatif ? '#3e7056' : '#f5f5f5'" stroke="#3e7056" stroke-width="1"/>
                </g>
              </g>
              
              <!-- Lorraine region -->
              <g class="region lorraine">
                <path d="M550,250 C520,270 500,300 510,330 C520,360 560,380 590,360 C620,340 630,310 620,280 C610,250 580,230 550,250" fill="white" stroke="#3e7056" stroke-width="2"/>
                
                <text x="560" y="310" font-size="16" font-weight="bold">Lorraine</text>
                
                <g transform="translate(620, 310)">
                  <text y="-35" x="5" font-size="12">Indicateur Q -> Q+</text>
                  <circle cx="0" cy="-30" r="10" [attr.fill]="regions[2].indicateurQPositif ? '#3e7056' : '#f5f5f5'" stroke="#3e7056" stroke-width="1"/>
                  
                  <text y="-15" x="5" font-size="12">Flexibilité partielle</text>
                  <circle cx="0" cy="-10" r="10" [attr.fill]="regions[2].flexibilitePartielle ? '#3e7056' : '#f5f5f5'" stroke="#3e7056" stroke-width="1"/>
                  
                  <text y="5" x="5" font-size="12">Indicateur Q -> Q-</text>
                  <circle cx="0" cy="10" r="10" [attr.fill]="regions[2].indicateurQNegatif ? '#3e7056' : '#f5f5f5'" stroke="#3e7056" stroke-width="1"/>
                </g>
              </g>
              
              <!-- Bretagne region -->
              <g class="region bretagne">
                <path d="M180,350 C150,370 130,400 140,430 C150,460 180,480 210,470 C240,460 260,430 250,400 C240,370 210,330 180,350" fill="white" stroke="#3e7056" stroke-width="2"/>
                
                <text x="180" y="410" font-size="16" font-weight="bold">Bretagne</text>
                
                <g transform="translate(260, 410)">
                  <text y="-35" x="5" font-size="12">Indicateur Q -> Q+</text>
                  <circle cx="0" cy="-30" r="10" [attr.fill]="regions[3].indicateurQPositif ? '#3e7056' : '#f5f5f5'" stroke="#3e7056" stroke-width="1"/>
                  
                  <text y="-15" x="5" font-size="12">Flexibilité partielle</text>
                  <circle cx="0" cy="-10" r="10" [attr.fill]="regions[3].flexibilitePartielle ? '#3e7056' : '#f5f5f5'" stroke="#3e7056" stroke-width="1"/>
                  
                  <text y="5" x="5" font-size="12">Indicateur Q -> Q-</text>
                  <circle cx="0" cy="10" r="10" [attr.fill]="regions[3].indicateurQNegatif ? '#3e7056' : '#f5f5f5'" stroke="#3e7056" stroke-width="1"/>
                </g>
              </g>
              
              <!-- Guyenne region -->
              <g class="region guyenne">
                <path d="M280,550 C250,570 230,600 240,630 C250,660 280,680 310,670 C340,660 360,630 350,600 C340,570 310,530 280,550" fill="white" stroke="#3e7056" stroke-width="2"/>
                
                <text x="280" y="610" font-size="16" font-weight="bold">Guyenne</text>
                
                <g transform="translate(360, 610)">
                  <text y="-35" x="5" font-size="12">Indicateur Q -> Q+</text>
                  <circle cx="0" cy="-30" r="10" [attr.fill]="regions[4].indicateurQPositif ? '#3e7056' : '#f5f5f5'" stroke="#3e7056" stroke-width="1"/>
                  
                  <text y="-15" x="5" font-size="12">Flexibilité partielle</text>
                  <circle cx="0" cy="-10" r="10" [attr.fill]="regions[4].flexibilitePartielle ? '#3e7056' : '#f5f5f5'" stroke="#3e7056" stroke-width="1"/>
                  
                  <text y="5" x="5" font-size="12">Indicateur Q -> Q-</text>
                  <circle cx="0" cy="10" r="10" [attr.fill]="regions[4].indicateurQNegatif ? '#3e7056' : '#f5f5f5'" stroke="#3e7056" stroke-width="1"/>
                </g>
              </g>
              
              <!-- Provence region -->
              <g class="region provence">
                <path d="M550,550 C520,570 500,600 510,630 C520,660 550,680 580,670 C610,660 630,630 620,600 C610,570 580,530 550,550" fill="white" stroke="#3e7056" stroke-width="2"/>
                
                <text x="550" y="610" font-size="16" font-weight="bold">Provence</text>
                
                <g transform="translate(630, 610)">
                  <text y="-35" x="5" font-size="12">Indicateur Q -> Q+</text>
                  <circle cx="0" cy="-30" r="10" [attr.fill]="regions[5].indicateurQPositif ? '#3e7056' : '#f5f5f5'" stroke="#3e7056" stroke-width="1"/>
                  
                  <text y="-15" x="5" font-size="12">Flexibilité partielle</text>
                  <circle cx="0" cy="-10" r="10" [attr.fill]="regions[5].flexibilitePartielle ? '#3e7056' : '#f5f5f5'" stroke="#3e7056" stroke-width="1"/>
                  
                  <text y="5" x="5" font-size="12">Indicateur Q -> Q-</text>
                  <circle cx="0" cy="10" r="10" [attr.fill]="regions[5].indicateurQNegatif ? '#3e7056' : '#f5f5f5'" stroke="#3e7056" stroke-width="1"/>
                </g>
              </g>
            </svg>
          </div>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
  
  <div class="footer-section">
    <div class="last-update">Date de mise à jour : {{ lastUpdate }}</div>
  </div>
</div>