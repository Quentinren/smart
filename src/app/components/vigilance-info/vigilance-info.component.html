<div class="vigilance-info-container">
  <!-- Table Section -->
  <div class="table-responsive" *ngIf="limitItems$ | async as limitItems">
    <table mat-table [dataSource]="limitItems" class="limits-table">
      <!-- Status Column -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let item" (click)="toggleLimit(item.id)">
          <mat-icon class="status-icon" color="primary" *ngIf="item.checked">check_circle</mat-icon>
          <mat-icon class="status-icon status-unchecked" *ngIf="!item.checked">radio_button_unchecked</mat-icon>
        </td>
      </ng-container>
      
      <!-- ID Column -->
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef>{{ tableTitle }}</th>
        <td mat-cell *matCellDef="let item">{{ item.id }}</td>
      </ng-container>
      
      <!-- Side Column -->
      <ng-container matColumnDef="side">
        <th mat-header-cell *matHeaderCellDef>{{ applicationSide }}</th>
        <td mat-cell *matCellDef="let item">{{ item.side }}</td>
      </ng-container>
      
      <!-- Value Column -->
      <ng-container matColumnDef="value">
        <th mat-header-cell *matHeaderCellDef>{{ workImpact }}</th>
        <td mat-cell *matCellDef="let item">{{ item.value }}</td>
      </ng-container>
      
      <!-- Interruptible Column -->
      <ng-container matColumnDef="interruptible">
        <th mat-header-cell *matHeaderCellDef>{{ interruptibleSupply }}</th>
        <td mat-cell *matCellDef="let item">
          <mat-icon *ngIf="item.interruptible">block</mat-icon>
        </td>
      </ng-container>
      
      <!-- Spread Column -->
      <ng-container matColumnDef="spread">
        <th mat-header-cell *matHeaderCellDef>{{ localizedSpread }}</th>
        <td mat-cell *matCellDef="let item">
          <mat-icon *ngIf="item.spread">trending_up</mat-icon>
        </td>
      </ng-container>
      
      <!-- Restriction Column -->
      <ng-container matColumnDef="restriction">
        <th mat-header-cell *matHeaderCellDef>{{ mutualizedRestriction }}</th>
        <td mat-cell *matCellDef="let item">
          <mat-icon *ngIf="item.restriction">warning</mat-icon>
        </td>
      </ng-container>
      
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>

  <!-- Maps Section -->
  <div class="maps-container">
    <div class="maps-grid">
      <div class="map-card">
        <div class="map-title">{{ mapTitles.northSouth }}</div>
        <div class="map-image">
          <img src="assets/images/infovigilance_ns_eo.png" alt="Carte des limites Nord-Sud et Est-Ouest" />
        </div>
      </div>
      <div class="map-card">
        <div class="map-title">{{ mapTitles.southNorth }}</div>
        <div class="map-image">
          <img src="assets/images/infovigilance_sn.jpg" alt="Carte des limites Sud-Nord" />
        </div>
      </div>
    </div>
  </div>
  
  <!-- Legend Section -->
  <div class="legend-container">
    <div class="legend-item">
      <div class="legend-icon">
        <mat-icon>build</mat-icon>
      </div>
      <div class="legend-text">Travaux Ã  petit impact</div>
    </div>
    <div class="legend-item">
      <div class="legend-icon">
        <mat-icon>engineering</mat-icon>
      </div>
      <div class="legend-text">Maintenance</div>
    </div>
  </div>

  <!-- Footer Section with Last Update and Definitions -->
  <div class="page-footer">
    <div class="last-update">{{ lastUpdateLabel }}: {{ lastUpdate }}</div>
    <button mat-button color="primary" (click)="toggleDefinitions()">
      <mat-icon>info</mat-icon>
      {{ definitionsLabel }}
    </button>
  </div>

  <!-- Definitions Panel -->
  <div class="definitions-panel" [class.visible]="showDefinitions">
    <div class="panel-header">
      <h3>{{ definitionsLabel }}</h3>
      <button mat-icon-button (click)="toggleDefinitions()">
        <mat-icon>close</mat-icon>
      </button>
    </div>
    <div class="panel-content">
      <div class="definition-item" *ngFor="let def of definitions">
        <h4>{{ def.title }}</h4>
        <p>{{ def.description }}</p>
      </div>
    </div>
  </div>
</div>